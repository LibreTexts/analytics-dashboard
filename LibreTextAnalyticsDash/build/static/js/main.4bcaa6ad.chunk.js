(this.webpackJsonplibretext=this.webpackJsonplibretext||[]).push([[0],{222:function(e,t,a){},490:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(54),r=a.n(i),s=a(38),c=a(5),o=(a(321),a(531)),u=a(532),d=a(538),j=a(524),b=a(526),h=a(527),g=a(523),O=a(525),p=a(533),f=a(529),m=a(530),x=a(520),y=a(534),v=a(521),S=a(537),w=a(518),A=a(519),C=a(55),k=a(43),L=a(44),T=a(45),D=a(47),P=a(49),I=a(504),M=a(505),U=a(509),q=a(132),N=a(41),R=a(133),E=a(108),B=a(250),F=a(3),_=(l.a.Component,a(222),a(510)),J=a(252),H=(l.a.Component,a(130)),z=a(62),V=a(28),Y=a(86),W=a(514),K=function(e){Object(T.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).state={exportData:0},n}return Object(L.a)(a,[{key:"render",value:function(){function e(e,t){if("lt"===t&&e.original.max)var a=new Date(e.original.max);else{if("adapt"!==t||!e.original.mostRecentAdaptLoad)return"";a=new Date(e.original.mostRecentAdaptLoad)}var n=a.toString().split(" ");return n[1]+" "+n[2]+" "+n[3]}var t=[{label:"Name",key:"_id"},{label:"LT Unique Pages Accessed",key:"objectCount"},{label:"LT Total Page Views",key:"viewCount"},{label:"LT Most Recent Page Load",key:"max"},{label:"LT Unique Interaction Days",key:"dateCount"}],a=[{Header:"Name",width:250,accessor:"_id",filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["_id"]})},filterAll:!0},{Header:"Unique Pages Accessed",headerClassName:"lt-data",accessor:"objectCount",show:this.props.showColumns["LT Unique Pages Accessed"],getProps:function(e,t,a){return{style:{background:"rgb(255, 255, 158, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["objectCount"]})},filterAll:!0},{Header:"Total Page Views",headerClassName:"lt-data",accessor:"viewCount",show:this.props.showColumns["LT Total Page Views"],getProps:function(e,t,a){return{style:{background:"rgb(255, 255, 158, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["viewCount"]})},filterAll:!0},{Header:"Most Recent Page Load",headerClassName:"lt-data",accessor:"max",show:this.props.showColumns["LT Most Recent Page Load"],Cell:function(t){return e(t,"lt")},getProps:function(e,t,a){return{style:{background:"rgb(255, 255, 158, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["max"]})},filterAll:!0},{Header:"Unique Interaction Days",headerClassName:"lt-data",accessor:"dateCount",show:this.props.showColumns["LT Unique Interaction Days"],getProps:function(e,t,a){return{style:{background:"rgb(255, 255, 158, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["dateCount"]})},filterAll:!0}];return this.props.hasAdapt&&(t.push({label:"Adapt Unique Interaction Days",key:"adaptUniqueInteractionDays"},{label:"Adapt Unique Assignments",key:"adaptUniqueAssignments"},{label:"Adapt Most Recent Page Load",key:"mostRecentAdaptLoad"}),a.push({Header:"Unique Interaction Days",headerClassName:"adapt-data",accessor:"adaptUniqueInteractionDays",show:this.props.showColumns["Adapt Unique Interaction Days"],getProps:function(e,t,a){return{style:{background:"rgb(171, 247, 177, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["adaptUniqueInteractionDays"]})},filterAll:!0},{Header:"Unique Assignments",headerClassName:"adapt-data",accessor:"adaptUniqueAssignments",show:this.props.showColumns["Adapt Unique Assignments"],getProps:function(e,t,a){return{style:{background:"rgb(171, 247, 177, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["adaptUniqueAssignments"]})},filterAll:!0},{Header:"Most Recent Page Load",headerClassName:"adapt-data",accessor:"mostRecentAdaptLoad",show:this.props.showColumns["Adapt Most Recent Page Load"],Cell:function(t){return e(t,"adapt")},getProps:function(e,t,a){return{style:{background:"rgb(171, 247, 177, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["mostRecentAdaptLoad"]})},filterAll:!0})),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(z.a,{data:this.props.data,columns:a,style:{textAlign:"center",overflow:"hidden"},defaultPageSize:5,gridArea:"table",filterable:!0}),Object(F.jsx)("div",{children:Object(F.jsx)(Y.CSVLink,{data:this.props.data,headers:t,filename:"student-chart-data.csv",children:Object(F.jsx)(g.a,{secondary:!0,icon:Object(F.jsx)(W.a,{})})})})]})}}]),a}(l.a.Component),G=a(515);function $(e){var t=e.xaxisLabel,a=e.data,n=e.width,i=e.allData,r=e.hasAdapt,s=e.showColumns,o=l.a.useState(null),u=Object(c.a)(o,2),d=u[0],j=u[1],b=l.a.useState(n),O=Object(c.a)(b,2),p=O[0],f=O[1],m=l.a.useState(30),x=Object(c.a)(m,2),y=x[0],v=x[1],S=l.a.useState(-1),w=Object(c.a)(S,2),A=w[0],k=w[1];"Most Recent Page Load"===t&&a.forEach((function(e){e._id=String(e._id).split("T")[0]}));var L=function(e){if(null!=e.payload[0]){var a=[{name:t,value:e.payload[0].payload._id},{name:"Student Count",value:e.payload[0].payload.count}];return Object(F.jsx)(P.DefaultTooltipContent,{payload:a})}return Object(F.jsx)(P.DefaultTooltipContent,Object(C.a)({},e))};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(I.a,{width:p,height:"90%",children:Object(F.jsxs)(_.a,{margin:{top:25,right:30,bottom:30,left:y},data:a,children:[Object(F.jsx)(U.a,{strokeDasharray:"3 3"}),Object(F.jsx)(q.a,{dataKey:"_id",children:Object(F.jsx)(N.a,{value:t,position:"bottom"})}),Object(F.jsx)(R.a,{dataKey:"count",children:Object(F.jsx)(N.a,{value:"Number of Students",position:"insideBottomLeft",angle:"-90"})}),Object(F.jsx)(E.a,{cursor:{strokeDasharray:"3 3"},content:Object(F.jsx)(L,{}),allowEscapeViewBox:{x:!1}}),Object(F.jsx)(J.a,{dataKey:"count",fill:"#0047BA",onClick:function(e){return function(e,t,a){var n=a.findIndex((function(t){return t._id===e._id}));k(n);var l=[];for(e.students;n>=0;)a[n].students.forEach((function(e){l.push(t.find((function(t){return t._id===e})))})),n-=1;l=l.filter((function(e){return void 0!==e})),f(450),v(10),j(l)}(e,i,a)},children:a.map((function(e,t){return Object(F.jsx)(H.a,{cursor:"pointer",fill:t<=A?"#FFBF00":"#0047BA"},"cell-".concat(t))}))})]})}),d&&Object(F.jsxs)(h.a,{fill:!0,flex:!0,responsive:!0,children:[Object(F.jsx)(g.a,{alignSelf:"end",onClick:function(){j(null),k(-1),f(n)},icon:Object(F.jsx)(G.a,{})}),Object(F.jsx)(K,{data:d,hasAdapt:r,showColumns:s})]})]})}var Q=function(e){Object(T.a)(a,e);var t=Object(D.a)(a);function a(e){return Object(k.a)(this,a),t.call(this,e)}return Object(L.a)(a,[{key:"render",value:function(){var e=350;this.props.height&&(e=this.props.height);var t="Pages Viewed";return"individual"===this.props.type&&(t="Total Views"),Object(F.jsx)(I.a,{height:e,children:Object(F.jsxs)(_.a,{width:500,height:e,margin:{right:20,bottom:80,left:30},data:JSON.parse(this.props.data).documents,children:[Object(F.jsx)(U.a,{strokeDasharray:"3 3"}),Object(F.jsx)(q.a,{dataKey:"dateString",interval:"preserveStartEnd",padding:{right:20},minTickGap:10,angle:45,tickMargin:25,children:Object(F.jsx)(N.a,{value:"Date (By "+this.props.binLabel+")",position:"bottom",dy:50})}),Object(F.jsx)(R.a,{dataKey:this.props.yaxis,children:Object(F.jsx)(N.a,{value:t,position:"insideBottomLeft",angle:"-90"})}),Object(F.jsx)(E.a,{cursor:{strokeDasharray:"3 3"}}),Object(F.jsx)(J.a,{dataKey:this.props.yaxis,fill:"#0047BA"})]})})}}]),a}(l.a.Component),X=a(516);function Z(e){var t=e.title,a=e.text,n=e.topMargin,i=l.a.useState(!0),r=Object(c.a)(i,2),s=r[0],o=r[1];return Object(F.jsxs)(h.a,{align:"center",direction:"column",gridArea:"title",margin:{top:n},children:[Object(F.jsxs)(h.a,{direction:"row",align:"center",children:[Object(F.jsx)(m.a,{size:"xlarge",weight:"bold",textAlign:"center",children:t}),Object(F.jsx)(g.a,{alignSelf:"end",onClick:function(){return o(!s)},icon:Object(F.jsx)(X.a,{})})]}),Object(F.jsx)(S.a,{open:s,direction:"vertical",alignSelf:"start",margin:{top:n},children:Object(F.jsx)(h.a,{background:{color:"#6FCFEB",opacity:"medium"},round:"medium",pad:"medium",align:"center",justify:"center",children:Object(F.jsx)(m.a,{children:a})})})]})}var ee=a(536);function te(e){var t=e.tab,a=e.data,n=e.hasAdapt,i=e.showColumns,r=l.a.useState(20),s=Object(c.a)(r,2),o=(s[0],s[1],l.a.useRef(null)),u=l.a.useState(a),d=Object(c.a)(u,2),j=d[0],b=d[1];if("student"===t)var h="Unique Pages Accessed",O="Total Page Views",p="_id",f="student-data.csv";else if("page"===t)O="Number of Times Viewed",h="Total Students Who Viewed",p="pageTitle",f="page-data.csv";if("student"===t)var x=function(e,t,a){return t?{style:{background:t.original.isEnrolled?"white":"Gainsboro",opacity:t.original.isEnrolled?1:.4}}:{}};function y(e,t,a){var n=a.keys[0],l=t.substring(0,2).replace(/[0-9]/g,"");if("<="===l){var i=t.replaceAll("<=","").trim();return i=parseInt(i),e.filter((function(e){return e[n]<=i}))}if("<"===l.trim()){i=t.replaceAll("<","").trim();return i=parseInt(i),e.filter((function(e){return e[n]<i}))}if(">"===l.trim()){i=t.replaceAll(">","").trim();return i=parseInt(i),e.filter((function(e){return e[n]>i}))}if(">="===l){i=t.replaceAll(">=","").trim();return i=parseInt(i),e.filter((function(e){return e[n]>=i}))}if(parseInt(t)||"="===l.trim()){i=t.replaceAll("=","").trim();return i=parseInt(i),e.filter((function(e){return e[n]===i}))}return[]}function v(e,t){if(e){var a=new Date(e).toString().split(" ");return a[1]+" "+a[2]+" "+a[3]}return""}a.forEach((function(e,t){Object.keys(e).includes("max")?a[t].max=v(e.max):Object.keys(e).includes("max")||(a[t].max=""),e.mostRecentAdaptLoad&&(a[t].mostRecentAdaptLoad=v(e.mostRecentAdaptLoad))}));var S=[{label:"Name",key:p},{label:"LT "+h,key:"objectCount"}],w=[{Header:Object(F.jsx)(ee.a,{content:"Name",children:"Name"}),width:250,accessor:p,Cell:function(e){return function(e,t){var a=e.original.pageTitle,n=e.original.hasData,l=(e.original.isEnrolled,e.original.pageURL),i="page";return l&&0!==l.length||(i="student"),"page"===i?Object(F.jsx)("a",{href:l,target:"_blank",children:a}):"student"===i&&n?e.original._id:"student"!==i||n?void 0:Object(F.jsx)(m.a,{weight:"bold",children:e.original._id})}(e)},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:[p]})},filterAll:!0}];return"student"===t?(S.push({label:"LT "+O,key:"viewCount"},{label:"LT Most Recent Page Load",key:"max"},{label:"LT Unique Interaction Days",key:"dateCount"}),w.push({Header:Object(F.jsx)(ee.a,{content:h,children:h}),headerClassName:"lt-data",accessor:"objectCount",show:i["LT "+h],getProps:function(e,t,a){return{style:{background:"rgb(255, 255, 158, .5)"}}},filterMethod:function(e,t){return y(t,e.value,{keys:["objectCount"]})},filterAll:!0},{Header:Object(F.jsx)(ee.a,{content:O,children:O}),headerClassName:"lt-data",accessor:"viewCount",show:i["LT "+O],getProps:function(e,t,a){return{style:{background:"rgb(255, 255, 158, .5)"}}},filterMethod:function(e,t){return y(t,e.value,{keys:["viewCount"]})},filterAll:!0},{Header:Object(F.jsx)(ee.a,{style:{opacity:1},content:"Most Recent Page Load",children:"Most Recent Page Load"}),headerClassName:"lt-data",accessor:"max",show:i["LT Most Recent Page Load"],getProps:function(e,t,a){return{style:{background:"rgb(255, 255, 158, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["max"]})},filterAll:!0},{Header:Object(F.jsx)(ee.a,{content:"Unique Interaction Days",children:"Unique Interaction Days"}),headerClassName:"lt-data",accessor:"dateCount",show:i["LT Unique Interaction Days"],getProps:function(e,t,a){return{style:{background:"rgb(255, 255, 158, .5)"}}},filterMethod:function(e,t){return y(t,e.value,{keys:["dateCount"]})},filterAll:!0})):"page"===t&&(S.push({label:"Average Page Duration",key:"durationInMinutes"},{label:"Average Percent Scrolled",key:"percentAvg"}),w.push({Header:h,accessor:"objectCount",filterMethod:function(e,t){return y(t,e.value,{keys:["objectCount"]})},filterAll:!0},{Header:"Average Page Duration (minutes)",accessor:"durationInMinutes",filterMethod:function(e,t){return y(t,e.value,{keys:["durationInMinutes"]})},filterAll:!0},{Header:"Average Percent Scrolled",accessor:"percentAvg",filterMethod:function(e,t){return y(t,e.value,{keys:["percentAvg"]})},filterAll:!0})),"student"===t&&n&&(S.push({label:"Adapt Unique Interaction Days",key:"adaptUniqueInteractionDays"},{label:"Adapt Unique Assignments",key:"adaptUniqueAssignments"},{label:"Adapt Most Recent Page Load",key:"mostRecentAdaptLoad"}),w.push({Header:Object(F.jsx)(ee.a,{content:"Unique Interaction Days",children:"Unique Interaction Days"}),headerClassName:"adapt-data",accessor:"adaptUniqueInteractionDays",show:i["Adapt Unique Interaction Days"],getProps:function(e,t,a){return{style:{background:"rgb(171, 247, 177, .5)"}}},filterMethod:function(e,t){return y(t,e.value,{keys:["adaptUniqueInteractionDays"]})},filterAll:!0},{Header:Object(F.jsx)(ee.a,{content:"Unique Assignments",children:"Unique Assignments"}),headerClassName:"adapt-data",accessor:"adaptUniqueAssignments",show:i["Adapt Unique Assignments"],getProps:function(e,t,a){return{style:{background:"rgb(171, 247, 177, .5)"}}},filterMethod:function(e,t){return y(t,e.value,{keys:["adaptUniqueAssignments"]})},filterAll:!0},{Header:Object(F.jsx)(ee.a,{content:"Most Recent Page Load",children:"Most Recent Page Load"}),headerClassName:"adapt-data",accessor:"mostRecentAdaptLoad",show:i["Adapt Most Recent Page Load"],getProps:function(e,t,a){return{style:{background:"rgb(171, 247, 177, .5)"}}},filterMethod:function(e,t){return Object(V.a)(t,e.value,{keys:["mostRecentAdaptLoad"]})},filterAll:!0})),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(z.a,{data:a,ref:function(e){o=e},onFilteredChange:function(){b(o.getResolvedState().sortedData)},columns:w,style:{textAlign:"center",overflow:"hidden"},minRows:1,gridArea:"table",filterable:!0,getTrProps:x}),Object(F.jsx)("div",{children:Object(F.jsx)(Y.CSVLink,{data:j,headers:S,filename:f,children:Object(F.jsx)(g.a,{secondary:!0,icon:Object(F.jsx)(W.a,{})})})})]})}var ae=a(179),ne=(a(468),a(142));l.a.Component;function le(e){var t=e.infoText,a=e.initShow,l=void 0===a||a,i=(e.infoTextAlign,e.infoTextWidth,e.showIcon),r=void 0!==i&&i,s=e.icon,o=e.color,u=e.count,d=e.setCount,j=(e.main,Object(n.useState)(l)),b=Object(c.a)(j,2),O=b[0],p=b[1],f=[];return f.push(Object(F.jsx)(m.a,{alignSelf:"center",margin:{top:"small"},children:t})),Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(S.a,{open:O,direction:"vertical",alignSelf:"start",children:Object(F.jsx)(h.a,{background:{color:o,opacity:.5},pad:"medium",align:"center",alignContent:"center",alignSelf:"center",justify:"center",height:"xsmall",width:"75%",margin:{vertical:"small"},children:Object(F.jsxs)(h.a,{height:"xsmall",width:"100%",direction:"row",children:[r&&Object(F.jsx)(g.a,{alignSelf:"start",icon:s}),Object(F.jsx)(h.a,{direction:"row",width:"90%",alignSelf:"start",alignContent:"center",align:"start",justify:"center",children:f}),Object(F.jsx)(h.a,{alignSelf:"end",width:"10%",justify:"end",children:Object(F.jsx)(g.a,{margin:{bottom:"medium"},alignSelf:"end",onClick:function(){p(!O),d(u+1)},icon:Object(F.jsx)(G.a,{})})})]})})})})}var ie=a(273),re=(a(277),a(39)),se=a.n(re),ce=a(274);a(472);function oe(e){var t=e.data,a=(e.pathLength,e.levels,e.filterClick),n=e.handleChange,i=e.init,r=e.clearPath,s=e.resetPath,o=l.a.useState(),u=Object(c.a)(o,2),d=u[0],j=u[1];function b(){return(b=Object(ie.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t.key),n("path",t.key);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(F.jsxs)(h.a,{width:"100%",children:[!s&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ce.a,{data:function(e){for(var t=JSON.parse(JSON.stringify(e)),a=Object.keys(t).length-1,n=[];a>1;){var l=[];Object.keys(t[a]).forEach((function(e){var n={label:e.replaceAll("_"," "),key:e,nodes:t[a][e]};l.push(n)})),n.push(l),a-=1}var i=n.length-1;Object.keys(n[0]).forEach((function(e,t){n[0][e].nodes.forEach((function(t,a){n[0][e].nodes[a]={label:t.replaceAll("_"," "),key:t,nodes:[]}}))}));for(var r=JSON.parse(JSON.stringify(n));i>0;)r[i].forEach((function(e){e.nodes.forEach((function(t,a){r[i-1].find((function(e){return e.key===t}))?e.nodes[a]=r[i-1].find((function(e){return e.key===t})):typeof e.nodes[a]!==Object&&(e.nodes[a]={label:t.replaceAll("_"," "),key:t,nodes:[]})}))})),i-=1;return r[n.length-1]}(t),onClickItem:function(e){!function(e){b.apply(this,arguments)}(e)},hasSearch:!1,initialActiveKey:i}),Object(F.jsx)(g.a,{secondary:!0,label:"Clear Current Path",color:"#022851",onClick:r,margin:{bottom:"small",horizontal:"large"}})]}),Object(F.jsx)(g.a,{primary:!0,label:"Apply",color:"#022851",margin:{horizontal:"large"},onClick:function(e){a(e,d)}})]})}var ue=a(34),de=a.n(ue),je=a(275),be={global:{colors:{brand:"#022851"},font:{family:"Roboto",size:"18px",height:"20px"}}};var he=function(){var e,t,a=Object(n.useState)(null),i=Object(c.a)(a,2),r=i[0],C=i[1],k=Object(n.useState)(null),L=Object(c.a)(k,2),T=L[0],D=L[1],P=Object(n.useState)(!1),I=Object(c.a)(P,2),M=(I[0],I[1],Object(n.useState)(!1)),U=Object(c.a)(M,2),q=U[0],N=U[1],R=Object(n.useState)("student"),E=Object(c.a)(R,2),B=E[0],_=E[1],J=Object(n.useState)(null),H=Object(c.a)(J,2),z=(H[0],H[1]),V=Object(n.useState)(null),Y=Object(c.a)(V,2),W=(Y[0],Y[1]),K=Object(n.useState)(!1),G=Object(c.a)(K,2),X=G[0],ee=G[1],ae=Object(n.useState)(!1),ne=Object(c.a)(ae,2),ie=ne[0],re=ne[1],se=Object(n.useState)(!1),ce=Object(c.a)(se,2),ue=(ce[0],ce[1]),he=Object(n.useState)(!1),ge=Object(c.a)(he,2),Oe=ge[0],pe=ge[1],fe=Object(n.useState)(!1),me=Object(c.a)(fe,2),xe=me[0],ye=me[1],ve=Object(n.useState)(null),Se=Object(c.a)(ve,2),we=(Se[0],Se[1],Object(n.useState)(null)),Ae=Object(c.a)(we,2),Ce=(Ae[0],Ae[1],Object(n.useState)(null)),ke=Object(c.a)(Ce,2),Le=ke[0],Te=ke[1],De=Object(n.useState)(null),Pe=Object(c.a)(De,2),Ie=Pe[0],Me=Pe[1],Ue=Object(n.useState)(!1),qe=Object(c.a)(Ue,2),Ne=qe[0],Re=qe[1],Ee=Object(n.useState)(null),Be=Object(c.a)(Ee,2),Fe=Be[0],_e=Be[1],Je=Object(n.useState)(null),He=Object(c.a)(Je,2),ze=He[0],Ve=He[1],Ye=Object(n.useState)(null),We=Object(c.a)(Ye,2),Ke=We[0],Ge=We[1],$e=Object(n.useState)(null),Qe=Object(c.a)($e,2),Xe=Qe[0],Ze=Qe[1],et=Object(n.useState)(null),tt=Object(c.a)(et,2),at=(tt[0],tt[1]),nt=Object(n.useState)(null),lt=Object(c.a)(nt,2),it=(lt[0],lt[1],Object(n.useState)(null)),rt=Object(c.a)(it,2),st=rt[0],ct=rt[1],ot=Object(n.useState)(null),ut=Object(c.a)(ot,2),dt=(ut[0],ut[1]),jt=Object(n.useState)(null),bt=Object(c.a)(jt,2),ht=bt[0],gt=bt[1],Ot=Object(n.useState)(null),pt=Object(c.a)(Ot,2),ft=(pt[0],pt[1]),mt=Object(n.useState)(null),xt=Object(c.a)(mt,2),yt=(xt[0],xt[1]),vt=Object(n.useState)(null),St=Object(c.a)(vt,2),wt=(St[0],St[1]),At=Object(n.useState)(null),Ct=Object(c.a)(At,2),kt=Ct[0],Lt=Ct[1],Tt=Object(n.useState)(null),Dt=Object(c.a)(Tt,2),Pt=Dt[0],It=Dt[1],Mt=Object(n.useState)(null),Ut=Object(c.a)(Mt,2),qt=Ut[0],Nt=Ut[1],Rt=Object(n.useState)(null),Et=Object(c.a)(Rt,2),Bt=(Et[0],Et[1]),Ft=l.a.useState("Average Duration"),_t=Object(c.a)(Ft,2),Jt=(_t[0],_t[1],l.a.useState("Unique Pages Accessed")),Ht=Object(c.a)(Jt,2),zt=(Ht[0],Ht[1],l.a.useState("duration","Average Duration")),Vt=Object(c.a)(zt,2),Yt=(Vt[0],Vt[1],l.a.useState()),Wt=Object(c.a)(Yt,2),Kt=(Wt[0],Wt[1],l.a.useState("durationInMinutes")),Gt=Object(c.a)(Kt,2),$t=(Gt[0],Gt[1],l.a.useState("objectCount")),Qt=Object(c.a)($t,2),Xt=(Qt[0],Qt[1],l.a.useState("Average Duration")),Zt=Object(c.a)(Xt,2),ea=(Zt[0],Zt[1],l.a.useState("Unique Pages Accessed")),ta=Object(c.a)(ea,2),aa=(ta[0],ta[1],l.a.useState("dateCount")),na=Object(c.a)(aa,2),la=na[0],ia=na[1],ra=l.a.useState("objectCount"),sa=Object(c.a)(ra,2),ca=sa[0],oa=(sa[1],l.a.useState("Unique Interaction Days")),ua=Object(c.a)(oa,2),da=ua[0],ja=ua[1],ba=l.a.useState("Unique Pages Accessed"),ha=Object(c.a)(ba,2),ga=ha[0],Oa=(ha[1],Object(n.useState)(!0)),pa=Object(c.a)(Oa,2),fa=(pa[0],pa[1],Object(n.useState)(0)),ma=Object(c.a)(fa,2),xa=ma[0],ya=ma[1],va=Object(n.useState)(!0),Sa=Object(c.a)(va,2),wa=Sa[0],Aa=Sa[1],Ca=Object(n.useState)(1),ka=Object(c.a)(Ca,2),La=ka[0],Ta=ka[1],Da=Object(n.useState)("Day"),Pa=Object(c.a)(Da,2),Ia=Pa[0],Ma=Pa[1],Ua=Object(n.useState)("day"),qa=Object(c.a)(Ua,2),Na=qa[0],Ra=qa[1],Ea=Object(n.useState)({}),Ba=Object(c.a)(Ea,2),Fa=Ba[0],_a=Ba[1],Ja=Object(n.useState)(),Ha=Object(c.a)(Ja,2),za=(Ha[0],Ha[1],Object(n.useState)()),Va=Object(c.a)(za,2),Ya=(Va[0],Va[1],Object(n.useState)()),Wa=Object(c.a)(Ya,2),Ka=Wa[0],Ga=Wa[1],$a=Object(n.useState)([]),Qa=Object(c.a)($a,2),Xa=(Qa[0],Qa[1]),Za=Object(n.useState)(null),en=Object(c.a)(Za,2),tn=(en[0],en[1]),an=Object(n.useState)(null),nn=Object(c.a)(an,2),ln=(nn[0],nn[1]),rn=Object(n.useState)(null),sn=Object(c.a)(rn,2),cn=sn[0],on=sn[1],un=Object(n.useState)(null),dn=Object(c.a)(un,2),jn=dn[0],bn=dn[1],hn=Object(n.useState)(null),gn=Object(c.a)(hn,2),On=gn[0],pn=gn[1],fn=Object(n.useState)(null),mn=Object(c.a)(fn,2),xn=mn[0],yn=mn[1],vn=Object(n.useState)([]),Sn=Object(c.a)(vn,2),wn=(Sn[0],Sn[1],Object(n.useState)(null)),An=Object(c.a)(wn,2),Cn=(An[0],An[1]),kn=Object(n.useState)(null),Ln=Object(c.a)(kn,2),Tn=(Ln[0],Ln[1]),Dn=Object(n.useState)(!1),Pn=Object(c.a)(Dn,2),In=Pn[0],Mn=Pn[1],Un=Object(n.useState)(null),qn=Object(c.a)(Un,2),Nn=qn[0],Rn=qn[1],En=Object(n.useState)(!1),Bn=Object(c.a)(En,2),Fn=Bn[0],_n=Bn[1],Jn=Object(n.useState)(!1),Hn=Object(c.a)(Jn,2),zn=Hn[0],Vn=Hn[1],Yn=Object(n.useState)(null),Wn=Object(c.a)(Yn,2),Kn=(Wn[0],Wn[1],Object(n.useState)(null)),Gn=Object(c.a)(Kn,2),$n=(Gn[0],Gn[1],Object(n.useState)([])),Qn=Object(c.a)($n,2),Xn=(Qn[0],Qn[1],Object(n.useState)(null)),Zn=Object(c.a)(Xn,2),el=Zn[0],tl=(Zn[1],Object(n.useState)(null)),al=Object(c.a)(tl,2),nl=al[0],ll=(al[1],Object(n.useState)(null)),il=Object(c.a)(ll,2),rl=il[0],sl=il[1],cl=Object(n.useState)(null),ol=Object(c.a)(cl,2),ul=ol[0],dl=ol[1],jl=(Object(n.useRef)(),l.a.useRef(null)),bl=(function(e){var t=l.a.useState(),a=Object(c.a)(t,2),n=a[0],i=a[1];l.a.useLayoutEffect((function(){}),[e]),Object(je.a)(e,(function(e){return i(e.contentRect)}))}(jl),Object(n.useState)(null)),hl=Object(c.a)(bl,2),gl=(hl[0],hl[1],Object(n.useState)({})),Ol=Object(c.a)(gl,2),pl=Ol[0],fl=Ol[1],ml=Object(n.useState)(null),xl=Object(c.a)(ml,2),yl=xl[0],vl=xl[1],Sl=Object(n.useState)(null),wl=Object(c.a)(Sl,2),Al=wl[0],Cl=wl[1],kl=Object(n.useState)(!1),Ll=Object(c.a)(kl,2),Tl=Ll[0],Dl=Ll[1],Pl=Object(n.useState)(!0),Il=Object(c.a)(Pl,2),Ml=Il[0],Ul=Il[1],ql=Object(n.useState)(!1),Nl=Object(c.a)(ql,2),Rl=Nl[0],El=Nl[1],Bl=Object(n.useState)(!1),Fl=Object(c.a)(Bl,2),_l=Fl[0],Jl=Fl[1],Hl=Object(n.useState)(!0),zl=Object(c.a)(Hl,2),Vl=(zl[0],zl[1],Object(n.useState)(0)),Yl=Object(c.a)(Vl,2),Wl=Yl[0],Kl=Yl[1],Gl=Object(n.useState)(""),$l=Object(c.a)(Gl,2),Ql=$l[0],Xl=($l[1],Object(n.useState)({All:!0,"LT Unique Pages Accessed":!0,"LT Total Page Views":!0,"LT Most Recent Page Load":!0,"LT Unique Interaction Days":!0})),Zl=Object(c.a)(Xl,2),ei=Zl[0],ti=Zl[1],ai=Object(n.useState)(Object.keys(ei)),ni=Object(c.a)(ai,2),li=ni[0],ii=ni[1],ri="/analytics/api";function si(){var e=JSON.parse(JSON.stringify(Fa));if(console.log(B),"student"===B);else if("page"===B);de()({method:"post",url:ri+"/data",headers:{"Content-Type":"application/json"},data:{startDate:r,endDate:T,course:Le,courseId:Ie,path:xn,groupBy:"$actor.id",tagType:el,tagTitle:nl}}).then((function(t){if(e.student=JSON.parse(t.data).documents,Lt(JSON.parse(t.data).documents),Aa(!0),Object.keys(e.student[0]).includes("adapt")&&!1!==e.student[0].adapt){Dl(!0);var a={All:!0,"LT Unique Pages Accessed":!0,"LT Total Page Views":!0,"LT Most Recent Page Load":!0,"LT Unique Interaction Days":!0,"Adapt Unique Interaction Days":!0,"Adapt Unique Assignments":!0,"Adapt Most Recent Page Load":!0},n=Object.keys(a);ti(a),ii(n)}else{a={All:!0,"LT Unique Pages Accessed":!0,"LT Total Page Views":!0,"LT Most Recent Page Load":!0,"LT Unique Interaction Days":!0},n=Object.keys(a);ti(a),ii(n)}})),de()({method:"post",url:ri+"/data",headers:{"Content-Type":"application/json"},data:{startDate:r,endDate:T,course:Le,courseId:Ie,path:xn,groupBy:"$object.id",tagType:el,tagTitle:nl}}).then((function(t){e.page=JSON.parse(t.data).documents,It(JSON.parse(t.data).documents),Aa(!0)})),_a(e)}function ci(){var e=[],t=[],a={};if("student"===B);else if("page"===B);de()({method:"post",url:ri+"/timelineData",headers:{"Content-Type":"application/json"},data:{course:Le,courseId:Ie,groupBy:"$actor.id",path:xn}}).then((function(t){var n=JSON.parse(t.data).documents;ct(n),n.forEach((function(t){return e.push(t._id)})),ft(null),a.allStudents=e,Re(!0)})),de()({method:"post",url:ri+"/timelineData",headers:{"Content-Type":"application/json"},data:{course:Le,courseId:Ie,groupBy:"$object.id",path:xn}}).then((function(e){var n=JSON.parse(e.data).documents;dt(n),n.forEach((function(e){void 0!==e.pageTitle?t.push(e.pageTitle):t.push(e._id)})),a.allPages=t,_e(t),yt(null),Re(!0)}))}function oi(){Rn(null),de()({method:"post",url:ri+"/studentchart",headers:{"Content-Type":"application/json"},data:{course:Le,courseId:Ie,groupBy:la,start:r,end:T,path:xn}}).then((function(e){Rn(JSON.parse(e.data))}))}function ui(){Ve(null),de()({method:"post",url:ri+"/pageviews",headers:{"Content-Type":"application/json"},data:{bin:La,unit:Na,course:Le,courseId:Ie,start:r,end:T,path:xn}}).then((function(e){console.log("PAGE VIEWS"),Ve(e.data)}))}function di(){if(Ge(null),"page"==B)var e=qt,t=null,a=null;else if("assignment"===B)t=yl,a=Al,e=null;de()({method:"post",url:ri+"/individualpageviews",headers:{"Content-Type":"application/json"},data:{bin:La,unit:Na,courseId:Ie,start:r,end:T,path:xn,individual:e,levelGroup:t,levelName:a}}).then((function(e){"page"===B?Ge(e.data):"assignment"===B&&Ze(e.data)}))}function ji(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("EVENT"),console.log(e),console.log(t),e.preventDefault(),Mn(!1),t&&pn(t),El(!1),Vn(!1),ee(!0),Aa(!1),Lt(null),It(null),gt(null),Nt(null),ft(null),yt(null),ee((function(e){return e})),Aa((function(e){return e})),Lt((function(e){return e})),It((function(e){return e})),console.log(On),si(),ui(),oi(),ci()}function bi(e){e.preventDefault(),"student"===B?(ht||alert("Please choose a student."),ue(!0),ft(null),st.forEach((function(e){e._id===ht&&at(e)}))):"page"===B?pe(!0):"assignment"===B&&ye(!0),di()}function hi(e){Ma(e),"Day"===e?(Ra("day"),Ta(1)):"Week"===e?(Ra("week"),Ta(1)):"2 Weeks"===e?(Ra("week"),Ta(2)):"Month"===e&&(Ra("month"),Ta(1))}function gi(e,t){if("start"===e&&(C(t),ee(!1)),"end"===e&&(D(t),ee(!1)),"category"===e&&(Tn(null),Te(null),Me(null),Cn(t)),"subject"===e&&(Te(null),Tn(t)),"courseId"===e&&(Nt(null),gt(null),ue(!1),pe(!1),dl(t),Me(rl[t]),Cn(null),Tn(null),Te(null),re(!1),pn(null),yn(null),C(null),D(null)),"student"===e&&(gt(t),ue(!1)),"page"===e){Nt(t),console.log(t);var a=Fa.page.find((function(e){return e.pageTitle===t}));console.log(a);var n=a._id;Bt(n),yt(null),pe(!1)}else"pageLevelGroup"===e?(vl(t),Cl(null)):"pageLevelName"===e&&(Ze(null),Cl(t),ye(!1));"individual start"===e&&(ft(null),yt(null),z(t),"student"===B?ue(!1):"page"===B&&pe(!1)),"individual end"===e&&(ft(null),yt(null),W(t),"student"===B?ue(!1):"page"===B&&pe(!1)),"chapter"===e&&(tn(t),ln(t),ee(!1)),"path"===e&&yn(t)}function Oi(){ui(),di()}return Object(n.useEffect)((function(){de()(ri+"/realcourses").then((function(e){var t={};e.data.forEach((function(e){t[e.course]=e._id})),sl(t)}))}),[]),Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(o.a,{justify:"start",margin:"medium",activeIndex:xa,onActive:function(e){return function(e){Le&&Ne?(ue(!1),0===e?(console.log("student"),_("student"),ya(0)):1===e?(console.log("page"),_("page"),ya(1)):2===e&&(_("assignment"),ya(2))):Le&&Ne?alert("Please choose a course and hit Apply."):0===e?(_("student"),ya(0)):1===e?(_("page"),ya(1)):2===e&&(_("assignment"),ya(2))}(e)},style:{overflowY:"scroll"},children:[Ne&&Object(F.jsxs)(u.a,{title:"By Student",overflowY:"scroll",children:[ie&&!kt&&Object(F.jsx)(le,{infoText:"Loading, please wait",showIcon:!0,icon:Object(F.jsx)(d.a,{})}),kt&&Fa.student&&Fa.student.length<1&&Object(F.jsx)(j.a,{title:"No data to display.",onClose:function(){}}),Object(F.jsx)(b.a,{theme:be,full:!0,fill:!0,overflowY:"scroll",children:Object(F.jsx)(h.a,{fill:!0,children:Object(F.jsxs)(h.a,{direction:"row",children:[kt&&Object(F.jsxs)(h.a,{children:[Object(F.jsx)(h.a,{width:"100px",margin:{top:"medium",left:"xsmall"},children:Object(F.jsx)(g.a,{label:"Choose Columns",secondary:!0,color:"#0047BA",size:"small",onClick:function(){return Jl(!_l)}})}),_l&&Object(F.jsx)(O.a,{margin:{top:"medium",left:"xsmall"},options:Object.keys(ei),value:li,onChange:function(e){var t=e.option;e.value;return function(e,t){var a=e.label,n=JSON.parse(JSON.stringify(ei)),l=JSON.parse(JSON.stringify(li));"All"===a&&n[a]?(n[a]=!1,l.find((function(e,t){e===a&&l.splice(t,1)}))):"All"!==a||n[a]?(n[a]?(n[a]=!1,n.All=!1):n[a]=!0,l.includes(a)?(l.find((function(e,t){e===a&&l.splice(t,1)})),l.find((function(e,t){"All"===e&&l.splice(t,1)}))):l.push(a)):(Object.keys(n).forEach((function(e){n[e]=!0})),l=Object.keys(n)),ii(l),ti(n)}(t)}})]}),Object(F.jsx)(p.a,{fill:!0,rows:["2/3","2/3","medium","large","large"],columns:["15%","79%"],gap:"small",areas:[{name:"table",start:[0,0],end:[1,0]},{name:"plots",start:[0,1],end:[1,1]},{name:"timeline-filters",start:[0,2],end:[1,2]},{name:"timeline",start:[0,3],end:[1,3]},{name:"path",start:[0,4],end:[1,4]}],flex:!0,responsive:!0,margin:"medium",overflowY:"scroll",children:kt&&Fa.student.length>0&&Object(F.jsxs)(F.Fragment,{children:[X&&(!kt||!wa)&&Object(F.jsx)(h.a,{gridArea:"table",background:"light-2",children:Object(F.jsx)(le,{infoText:"Loading, please wait",showIcon:!0,icon:Object(F.jsx)(d.a,{})})}),kt&&Ne&&wa&&Object(F.jsx)(h.a,{gridArea:"table",border:!0,overflowY:"scroll",responsive:!0,children:Object(F.jsx)(te,{tab:B,data:Fa.student,hasAdapt:Tl,showColumns:ei,activityFilter:Ql})}),kt&&Ne&&wa&&Object(F.jsx)(h.a,(e={ref:jl,gridArea:"plots",border:!0,responsive:!0,fill:!0,direction:"row",justifyContent:"center",justify:"center",align:"center",overflowY:"scroll"},Object(s.a)(e,"responsive",!0),Object(s.a)(e,"children",Object(F.jsxs)(p.a,{fill:!0,rows:["xsmall","full"],columns:["100%"],gap:"none",areas:[{name:"title",start:[0,0],end:[0,0]},{name:"scatter-plot",start:[0,1],end:[0,1]}],overflowY:"scroll",responsive:!0,children:[Object(F.jsx)(h.a,{align:"center",direction:"column",gridArea:"title",children:Object(F.jsx)(Z,{title:"Student Metrics Bar Chart",text:"This graph shows data for all students. Switch the axis values using the filters to the left. Click on a bar to populate a table with the chosen data.",topMargin:"small"})}),Object(F.jsxs)(h.a,{gridArea:"scatter-plot",justify:"center",direction:"row",margin:{bottom:"xlarge"},responsive:!0,children:[Object(F.jsx)(g.a,{secondary:!0,size:"small",alignSelf:"start",label:"Filters",onClick:function(){return N(!0)},margin:{top:"small"}}),q&&Object(F.jsxs)(f.a,{onEsc:function(){return N(!1)},onClickOutside:function(){return N(!1)},position:"left",margin:{left:"large"},children:[Object(F.jsx)(g.a,{icon:Object(F.jsx)(w.a,{}),onClick:function(){return N(!1)}}),Object(F.jsxs)(h.a,{direction:"column",alignSelf:"center",margin:"large",children:[Object(F.jsx)(m.a,{size:"medium",weight:"bold",textAlign:"center",children:"Bar Chart Display Filters"}),Object(F.jsx)(m.a,{children:"Data:"}),Object(F.jsx)(x.a,{options:["Unique Pages Accessed","Unique Interaction Days","Most Recent Page Load"],margin:{right:"medium",left:"medium"},value:da,onChange:function(e){return function(e){ja(e),"Unique Interaction Days"===e?ia("dateCount"):"Unique Pages Accessed"===e?ia("objectCount"):"Most Recent Page Load"===e&&ia("lastDate")}(e.option)}}),Object(F.jsx)(g.a,{primary:!0,label:"Apply",onClick:function(){return oi()},margin:"large"})]})]}),!Nn&&Object(F.jsx)(le,{infoText:"Loading, please wait",showIcon:!0,icon:Object(F.jsx)(d.a,{})}),Nn&&Object(F.jsx)($,{hasAdapt:Tl,showColumns:ei,allData:Fa.student.filter((function(e){return!0===e.isEnrolled})),tab:B,data:Nn.documents,xaxis:"_id",xaxisLabel:da,yaxis:ca,yaxisLabel:ga,width:1e3})]})]})),e))]})})]})})})]}),Ne&&Object(F.jsxs)(u.a,{title:"By Page",overflowY:"scroll",children:[ie&&!Pt&&Object(F.jsx)(le,{infoText:"Loading, please wait",showIcon:!0,icon:Object(F.jsx)(d.a,{})}),Pt&&Fa.page.length<1&&Object(F.jsx)(j.a,{title:"No data to display.",onClose:function(){}}),Object(F.jsx)(b.a,{theme:be,full:!0,fill:"true",overflowY:"scroll",children:Object(F.jsx)(h.a,{fill:!0,children:Object(F.jsx)(h.a,{direction:"row",children:Object(F.jsx)(p.a,{fill:!0,rows:["2/3","2/3","1/3","2/3"],columns:["15%","79%"],gap:"small",areas:[{name:"table",start:[0,0],end:[1,0]},{name:"horizontal-chart",start:[0,1],end:[1,1]},{name:"timeline-filters",start:[0,2],end:[1,2]},{name:"timeline",start:[0,3],end:[1,3]}],flex:!0,responsive:!0,margin:"medium",overflowY:"scroll",children:Pt&&Fa.page.length>0&&Object(F.jsxs)(F.Fragment,{children:[X&&(!Pt||!wa)&&Object(F.jsx)(h.a,{gridArea:"table",background:"light-2",children:Object(F.jsx)(le,{infoText:"Loading, please wait",showIcon:!0,icon:Object(F.jsx)(d.a,{})})}),Pt&&Ne&&wa&&Object(F.jsx)(h.a,{gridArea:"table",border:!0,children:Object(F.jsx)(te,{tab:B,data:Fa.page})}),Pt&&Ne&&wa&&Object(F.jsx)(h.a,{gridArea:"horizontal-chart",border:!0,align:"center",direction:"row",overflowY:"scroll",children:Object(F.jsxs)(p.a,{fill:!0,rows:["1/5","4/5"],columns:["100%"],gap:"small",areas:[{name:"title",start:[0,0],end:[0,0]},{name:"plot",start:[0,1],end:[0,1]}],children:[Object(F.jsx)(h.a,{align:"center",direction:"column",gridArea:"title",children:Object(F.jsx)(Z,{title:"Aggregate Page Views Bar Chart",text:"This graph shows the number of page views for all pages in "+ul+". Switch the unit of time using the filters to the left.",topMargin:"small"})}),Object(F.jsxs)(h.a,{gridArea:"plot",justify:"center",direction:"row",children:[Object(F.jsx)(g.a,{alignSelf:"start",secondary:!0,onClick:function(){return N(!0)},icon:Object(F.jsx)(A.a,{}),margin:{top:"small",left:"small"}}),q&&Object(F.jsxs)(f.a,{onEsc:function(){return N(!1)},onClickOutside:function(){return N(!1)},position:"left",margin:{left:"large"},children:[Object(F.jsx)(g.a,{icon:Object(F.jsx)(w.a,{}),onClick:function(){return N(!1)}}),Object(F.jsxs)(h.a,{direction:"column",alignSelf:"center",margin:"large",children:[Object(F.jsx)(m.a,{size:"medium",weight:"bold",textAlign:"center",children:"Bar Chart Display Filters"}),Object(F.jsx)(m.a,{children:"Unit of Time:"}),Object(F.jsx)(x.a,{options:["Day","Week","2 Weeks","Month"],margin:{right:"medium",left:"medium"},value:Ia,onChange:function(e){return hi(e.option)}}),Object(F.jsx)(g.a,{primary:!0,label:"Apply",onClick:function(){return Oi()},margin:"large"})]})]}),ze&&Object(F.jsx)(Q,{data:ze,type:"aggregate",xaxis:"_id",yaxis:"count",binLabel:Ia,width:980})]})]})}),Pt&&Ne&&wa&&Fe&&Object(F.jsxs)(h.a,{gridArea:"timeline-filters",border:!0,align:"center",pad:"small",overflowY:"auto",children:[Object(F.jsx)(Z,{title:"Individual Page Metrics Bar Chart",text:"This graph shows data for an individual page. Switch the unit of time using the filters to the left.",topMargin:"small"}),Object(F.jsx)(h.a,{direction:"row",children:Object(F.jsx)(x.a,{options:Fe,margin:{vertical:"xsmall",right:"large"},dropAlign:{top:"bottom",left:"left",right:"right"},dropHeight:"small",value:qt,onChange:function(e){return gi("page",e.option)}})}),Object(F.jsx)(g.a,{primary:!0,label:"Apply",disabled:Oe,onClick:bi,margin:{bottom:"small",top:"small",right:"medium"}})]}),Oe&&!Ke&&Object(F.jsx)(h.a,{gridArea:"timeline",background:"light-2",children:Object(F.jsx)(le,{infoText:"Loading, please wait",showIcon:!0,icon:Object(F.jsx)(d.a,{})})}),null!=Ke&&Object(F.jsx)(h.a,{gridArea:"timeline",align:"center",pad:"small",overflowY:"auto",children:Object(F.jsxs)(h.a,{justify:"center",direction:"row",children:[Object(F.jsx)(g.a,{alignSelf:"start",secondary:!0,onClick:function(){return N(!0)},icon:Object(F.jsx)(A.a,{}),margin:{top:"small",left:"small"}}),q&&Object(F.jsxs)(f.a,{onEsc:function(){return N(!1)},onClickOutside:function(){return N(!1)},position:"left",margin:{left:"large"},children:[Object(F.jsx)(g.a,{icon:Object(F.jsx)(w.a,{}),onClick:function(){return N(!1)}}),Object(F.jsxs)(h.a,{direction:"column",alignSelf:"center",margin:"large",children:[Object(F.jsx)(m.a,{size:"medium",weight:"bold",textAlign:"center",children:"Bar Chart Display Filters"}),Object(F.jsx)(m.a,{children:"Unit of Time:"}),Object(F.jsx)(x.a,{options:["Day","Week","2 Weeks","Month"],margin:{right:"medium",left:"medium"},value:Ia,onChange:function(e){return hi(e.option)}}),Object(F.jsx)(g.a,{primary:!0,label:"Apply",onClick:function(){return Oi()},margin:"large"})]})]}),Ke&&Object(F.jsx)(h.a,{width:"980px",height:"100%",children:Object(F.jsx)(Q,{data:Ke,type:"individual",xaxis:"_id",yaxis:"count",binLabel:Ia,width:980,height:500})})]})})]})})})})})]}),Tl&&Object(F.jsx)(u.a,{title:"By Assignment",children:Object(F.jsx)(b.a,{theme:be,children:Object(F.jsxs)(p.a,{fill:!0,rows:["auto","auto"],columns:["15%","79%"],gap:"small",areas:[{name:"timeline-filters",start:[0,0],end:[1,0]},{name:"timeline",start:[0,1],end:[1,1]}],flex:!0,responsive:!0,margin:"medium",overflowY:"scroll",children:[pl&&Object(F.jsxs)(h.a,{gridArea:"timeline-filters",border:!0,align:"center",pad:"small",overflowY:"auto",children:[Object(F.jsx)(Z,{title:"Individual Assignment Metrics Bar Chart",text:"This graph shows data for an individual page. Switch the unit of time using the filters to the left.",topMargin:"small"}),Object(F.jsx)(h.a,{direction:"row",children:pl&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(x.a,{options:Object.keys(pl),margin:{right:"small",vertical:"xsmall"},value:yl,onChange:function(e){return gi("pageLevelGroup",e.option)}}),yl&&Object(F.jsx)(x.a,{options:pl[yl],margin:{right:"medium",left:"medium",vertical:"xsmall"},value:Al,onChange:function(e){return gi("pageLevelName",e.option)}})]})}),Object(F.jsx)(g.a,{primary:!0,label:"Apply",disabled:xe,onClick:bi,margin:{bottom:"small",top:"small",left:"small"}})]}),null!=Xe&&Object(F.jsx)(h.a,{gridArea:"timeline",align:"center",pad:"small",overflowY:"auto",children:Object(F.jsxs)(h.a,{justify:"center",direction:"row",children:[Object(F.jsx)(g.a,{alignSelf:"start",secondary:!0,onClick:function(){return N(!0)},icon:Object(F.jsx)(A.a,{}),margin:{top:"small",left:"small"}}),q&&Object(F.jsxs)(f.a,{onEsc:function(){return N(!1)},onClickOutside:function(){return N(!1)},position:"left",margin:{left:"large"},children:[Object(F.jsx)(g.a,{icon:Object(F.jsx)(w.a,{}),onClick:function(){return N(!1)}}),Object(F.jsxs)(h.a,{direction:"column",alignSelf:"center",margin:"large",children:[Object(F.jsx)(m.a,{size:"medium",weight:"bold",textAlign:"center",children:"Bar Chart Display Filters"}),Object(F.jsx)(m.a,{children:"Unit of Time:"}),Object(F.jsx)(x.a,{options:["Day","Week","2 Weeks","Month"],margin:{right:"medium",left:"medium"},value:Ia,onChange:function(e){return hi(e.option)}}),Object(F.jsx)(g.a,{primary:!0,label:"Apply",onClick:function(){return Oi()},margin:"large"})]})]}),Xe&&Object(F.jsx)(h.a,{width:"980px",height:"100%",children:Object(F.jsx)(Q,{data:Xe,type:"individual",xaxis:"_id",yaxis:"count",binLabel:Ia,width:980,height:500})})]})}),xe&&!Xe&&Object(F.jsx)(h.a,{gridArea:"timeline",background:"light-2",children:Object(F.jsx)(le,{infoText:"Loading, please wait",showIcon:!0,icon:Object(F.jsx)(d.a,{})})})]})})}),rl&&Object(F.jsxs)(h.a,{fill:!0,children:[Object(F.jsx)(h.a,{width:"100%",responsive:!0,margin:{bottom:"small"},children:Ml&&Object(F.jsx)(le,{show:Ml,infoText:"Please choose a course.",color:"#b0e0e6",main:!0})}),Object(F.jsxs)(h.a,{direction:"row",children:[Object(F.jsx)(h.a,{gridArea:"courses",alignContent:"center",align:"center",alignSelf:"center",fill:!0,children:Object(F.jsxs)(h.a,{children:[Object(F.jsxs)(h.a,{direction:"row",children:[Object(F.jsx)(h.a,{width:"500px",margin:{right:"medium",left:"large",bottom:"small"},children:Object(F.jsx)(x.a,{options:Object.keys(rl),margin:{right:"large",left:"large",bottom:"small"},value:ul,dropHeight:"medium",onChange:function(e){return gi("courseId",e.option)}})}),Object(F.jsx)(g.a,{label:"Apply",style:{height:45},primary:!0,color:"#0047BA",disabled:ie,onClick:function(e){e.preventDefault(),!Le&&!Ie||Le&&Ie?Le&&Ie?(alert("Please choose either a course or a course Id."),Tn(null),Te(null),Cn(null),Me(null)):alert("Please choose a course."):(El(!1),Ul(!1),Dl(!1),re(!0),wt(null),Lt(null),It(null),gt(null),Nt(null),Ge(null),fl(null),on(null),pn(null),yn(null),si(),function(){var e={};de()({method:"post",url:ri+"/adaptlevels",headers:{"Content-Type":"application/json"},data:{courseId:Ie}}).then((function(t){JSON.parse(t.data).forEach((function(t){var a=[];t.level_name.forEach((function(e){return a.push(e.replaceAll('"',""))})),e[t._id.replaceAll('"',"")]=a})),fl(e)}))}(),ci(),oi(),ui(),function(){Xa(null);var e=[],t={};de()({method:"post",url:ri+"/chapters",headers:{"Content-Type":"application/json"},data:{course:Le,courseId:Ie}}).then((function(a){var n=[],l=(n=JSON.parse(a.data))[0].count;Ga(l),n.forEach((function(e,a){e.chapter.forEach((function(a,n){n===e.chapter.length-1||n in t||(t[n]={}),n<e.chapter.length-1&&(a in t[n]?t[n][a].includes(e.chapter[n+1])||e.chapter[n+1]!=={}&&t[n][a].push(e.chapter[n+1]):e.chapter[n+1]!=={}&&(t[n][a]=[e.chapter[n+1]]))}))}));var i={};Object.keys(t).forEach((function(e){Object.keys(t[e]).forEach((function(t){i[t]=e}))})),bn(i),on(t),Xa(e.filter((function(e,t,a){return a.indexOf(e)===t})))}))}())}})]}),ie&&!Fa.student&&!Fa.page&&Object(F.jsx)(le,{infoText:"Loading, please wait",showIcon:!0,icon:Object(F.jsx)(d.a,{})})]})}),Fa.student&&Object(F.jsxs)(h.a,{direction:"column",alignSelf:"start",border:!0,width:"300px",height:"100px",children:[Object(F.jsxs)(h.a,{direction:"row",children:[Object(F.jsx)(h.a,{margin:{left:"small",bottom:"small",top:"small"},border:!0,height:"30px",width:"40px",background:"rgb(255, 255, 158, .5)"}),Object(F.jsx)(m.a,{margin:{left:"small",bottom:"small",top:"small"},children:"LibreText Data"})]}),Object(F.jsxs)(h.a,{direction:"row",children:[Object(F.jsx)(h.a,{margin:{left:"small",bottom:"small"},border:!0,height:"30px",width:"40px",background:"rgb(171, 247, 177, .5)"}),Object(F.jsx)(m.a,{margin:{left:"small",bottom:"small"},children:"Adapt Data"})]})]})]})]}),Object(F.jsx)(h.a,{gridArea:"header",background:"#022851",fill:!0,contentAlign:"center",margin:{top:"small"},children:Object(F.jsx)(y.a,{level:"3",alignSelf:"start",responsive:!0,gridArea:"header",margin:"small",children:"LibreTexts Activity Dashboard"})}),Fa.student&&Fa.page&&Object(F.jsx)(h.a,{children:Object(F.jsx)(g.a,{margin:"medium",color:"#022851",label:"Data Filters",onClick:function(){return El(!Rl)}})}),!Rl&&Fa.student&&Fa.page&&0===Wl&&Object(F.jsx)(le,{count:Wl,setCount:Kl,infoText:"Click on the button to the left to filter the data by date and course unit.",color:"#b0e0e6"}),Rl&&Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(h.a,{direction:"row",children:[Object(F.jsx)(h.a,{gridArea:"filters",border:!0,direction:"row",height:"125px",margin:{bottom:"medium"},children:Object(F.jsxs)(h.a,{margin:{bottom:"medium",top:"xsmall"},direction:"row",height:"100px",children:[Object(F.jsx)(h.a,{children:Object(F.jsx)(m.a,{size:"large",weight:"bold",textAlign:"center",margin:{left:"small"},children:" Data Filters "})}),Object(F.jsxs)(h.a,(t={direction:"column",pad:"small"},Object(s.a)(t,"direction","row"),Object(s.a)(t,"margin",{top:"medium"}),Object(s.a)(t,"children",[Object(F.jsx)(m.a,{margin:{vertical:"small",right:"xsmall"},children:"Start:"}),Object(F.jsx)(v.a,{format:"mm/dd/yyyy",value:r,onChange:function(e){gi("start",e.value)}}),Object(F.jsx)(m.a,{margin:{vertical:"small",right:"xsmall",left:"xsmall"},children:"End:"}),Object(F.jsx)(v.a,{format:"mm/dd/yyyy",value:T,onChange:function(e){gi("end",e.value)}})]),t)),Object(F.jsxs)(h.a,{direction:"row",alignSelf:"center",pad:"small",children:[Object(F.jsx)(g.a,{size:"small",margin:{bottom:"small",top:"medium",horizontal:"medium"},label:"Clear Dates",onClick:function(e){e.preventDefault(),C(null),D(null),ee(!1)},color:"#022851"}),Object(F.jsx)(g.a,{label:"Apply",margin:{top:"small"},style:{height:45},primary:!0,color:"#0047BA",disabled:X,onClick:ji})]})]})}),cn&&jn&&Object(F.jsxs)(h.a,{margin:{bottom:"medium"},children:[Object(F.jsx)(g.a,{alignSelf:"start",margin:{horizontal:"xlarge"},label:"Course Structure Menu",onClick:function(e){Mn(!In)},color:"#022851"}),Object(F.jsx)(S.a,{open:In,children:Object(F.jsxs)(h.a,{width:"350px",border:zn,margin:"large",children:[!zn&&Object(F.jsx)(Z,{title:"Course Structure Dropdown",text:"Choose a unit from the course to focus on."}),zn&&Object(F.jsx)(m.a,{margin:"medium",children:"Please hit apply for the changes to take effect."}),Object(F.jsx)(oe,{resetPath:zn,pathLength:Ka,data:cn,levels:jn,handleChange:gi,filterClick:ji,init:xn,clearPath:function(e){e.preventDefault(),pn(null),yn(null),Vn(!0)}})]})})]})]})}),(On||r||T||Fn)&&!Rl&&Object(F.jsxs)(h.a,{direction:"column",border:!0,margin:{top:"small",right:"medium"},width:{min:"500px"},children:[On&&Object(F.jsxs)(m.a,{margin:"small",children:["Current chosen path: ",On.split("/").map((function(e){return Object(F.jsx)("li",{children:e.replaceAll("_"," ")})}))]}),r&&Object(F.jsxs)(m.a,{margin:"small",children:["Start Date: ",new Date(r.split("T")[0]).toString()]}),T&&Object(F.jsxs)(m.a,{margin:"small",children:["End Date: ",new Date(T.split("T")[0]).toString()]}),!Fn&&Object(F.jsx)(g.a,{secondary:!0,size:"small",label:"Clear All Filters",alignSelf:"center",color:"#022851",margin:{vertical:"small"},onClick:function(e){e.preventDefault(),_n(!0),pn(null),yn(null),C(null),D(null)},type:"reset"}),Fn&&Object(F.jsxs)(h.a,{direction:"column",children:[Object(F.jsx)(m.a,{margin:"medium",children:"Please hit apply for the changes to take effect."}),Object(F.jsx)(g.a,{primary:!0,label:"Apply",onClick:function(e){e.preventDefault(),Mn(!1),re(!0),wt(null),Lt(null),It(null),gt(null),Nt(null),si(),ci(),oi(),ui(),_n(!1)},color:"#022851",margin:{bottom:"small",top:"small",horizontal:"large"}})]})]})]})})},ge=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,542)).then((function(t){var a=t.getCLS,n=t.getFID,l=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),l(e),i(e),r(e)}))};r.a.render(Object(F.jsx)(l.a.StrictMode,{children:Object(F.jsx)(he,{})}),document.getElementById("root")),ge()}},[[490,1,2]]]);
//# sourceMappingURL=main.4bcaa6ad.chunk.js.map